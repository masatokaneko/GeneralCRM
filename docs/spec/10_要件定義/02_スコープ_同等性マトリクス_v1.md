# スコープ・同等性マトリクス v1

## 概要

本マトリクスは、Salesforce Sales Cloud同等のCRMシステム開発において、各機能要素の実装優先度と受入基準を定義する。MoSCoW方式（Must/Should/Could/Won't）を採用し、包括的な品質保証基準を設ける。

## 分類基準

- **Must**: MVPで必須実装。これなしでは基本的なCRM業務が成立しない
- **Should**: MVPで実装すべき。競合優位性に直結する重要機能
- **Could**: Phase2で実装可能。ユーザビリティ向上に寄与
- **Won't**: Phase3以降または実装しない。高度な専門機能

---

## A. コアデータモデル（Core Data Model）

### A1. 取引先・担当者管理

| 機能要素 | 優先度 | Salesforce同等性 | 受入基準 |
|:---------|:-------|:----------------|:---------|
| Account CRUD | **Must** | 同等 | ・法人/個人の区別機能<br/>・必須項目バリデーション<br/>・重複チェック（名前ベース） |
| Contact CRUD | **Must** | 同等 | ・Account必須紐付け<br/>・WhoId活動参照対応<br/>・メールアドレス一意制約 |
| Account階層表示 | **Should** | 同等 | ・親子関係の再帰表示<br/>・階層パンくずナビゲーション<br/>・循環参照防止 |
| Accountチーム | **Should** | 同等 | ・複数ユーザによる役割管理<br/>・チームメンバー権限拡張<br/>・役割別表示制御 |
| 重複検知・統合 | **Could** | 簡易 | ・名前・メール・電話での検知<br/>・手動統合インターフェース<br/>・統合履歴の保持 |

### A2. リード管理

| 機能要素 | 優先度 | Salesforce同等性 | 受入基準 |
|:---------|:-------|:----------------|:---------|
| Lead CRUD | **Must** | 同等 | ・ステータス管理（新規～変換）<br/>・必須項目バリデーション<br/>・所有者割当機能 |
| Lead変換 | **Must** | 同等 | ・Account/Contact/Opportunity原子的生成<br/>・変換履歴の追跡<br/>・不適格理由の記録 |
| Lead割当ルール | **Could** | 同等 | ・条件ベース自動割当<br/>・ラウンドロビン対応<br/>・割当履歴の保持 |
| Web-to-Lead | **Won't** | - | API経由投入で代替 |

### A3. 商談管理

| 機能要素 | 優先度 | Salesforce同等性 | 受入基準 |
|:---------|:-------|:----------------|:---------|
| Opportunity CRUD | **Must** | 同等 | ・Stage-Probability連動<br/>・金額・クローズ日管理<br/>・予測カテゴリ自動設定 |
| Stage・確度管理 | **Must** | 同等 | ・カスタムStage定義<br/>・Probability自動更新<br/>・履歴追跡（Field History） |
| Opportunityチーム | **Should** | 同等 | ・AE/SE/其他役割管理<br/>・権限拡張（Read/Write）<br/>・分割率設定 |
| Contact役割管理 | **Should** | 同等 | ・意思決定者フラグ<br/>・影響力レベル設定<br/>・Opportunity-Contact多対多 |
| パイプライン表示 | **Should** | 同等 | ・Kanban形式<br/>・Stage別金額集計<br/>・ドラッグ&ドロップ更新 |

### A4. 商品・価格・見積

| 機能要素 | 優先度 | Salesforce同等性 | 受入基準 |
|:---------|:-------|:----------------|:---------|
| Product・Pricebook | **Must** | 同等 | ・標準価格表必須設定<br/>・通貨別価格対応<br/>・有効期間管理 |
| OpportunityLineItem | **Must** | 同等 | ・Pricebook整合性チェック<br/>・数量・単価・割引計算<br/>・小計・総額自動更新 |
| Quote CRUD | **Should** | 同等 | ・Opportunity複数Quote<br/>・PDF出力機能<br/>・有効期限管理 |
| Quote同期 | **Should** | 同等 | ・Primary Quote設定<br/>・双方向同期（金額・明細）<br/>・同期履歴の追跡 |
| Order管理 | **Could** | 簡易 | ・Opportunity/Quoteからの変換<br/>・ステータス管理<br/>・請求連携準備 |

## B. セキュリティ・権限（Security & Sharing）

### B1. 認証・認可

| 機能要素 | 優先度 | Salesforce同等性 | 受入基準 |
|:---------|:-------|:----------------|:---------|
| ロール階層 | **Must** | 同等 | ・上位ロールによるデータアクセス<br/>・階層の可視化<br/>・権限継承の検証 |
| OWD設定 | **Must** | 同等 | ・オブジェクト別アクセスレベル<br/>・Private/Public設定<br/>・デフォルト権限の適用 |
| 共有ルール | **Must** | 同等 | ・条件ベース共有拡張<br/>・Read/Writeレベル指定<br/>・ルール優先順位制御 |
| FLS（項目セキュリティ） | **Must** | 同等 | ・プロファイル別項目権限<br/>・表示/編集の分離<br/>・API経由でも適用 |
| 手動共有 | **Should** | 同等 | ・レコード個別共有<br/>・共有理由の記録<br/>・共有解除機能 |
| Territory管理 | **Could** | 同等 | ・地域・業界ベース割当<br/>・複雑な条件設定<br/>・Territory階層 |

### B2. データアクセス制御

| 機能要素 | 優先度 | Salesforce同等性 | 受入基準 |
|:---------|:-------|:----------------|:---------|
| レコードレベルセキュリティ | **Must** | 同等 | ・所有者ベースアクセス<br/>・共有による権限拡張<br/>・一貫したアクセス判定 |
| プロファイル管理 | **Must** | 同等 | ・オブジェクト権限設定<br/>・項目権限設定<br/>・機能権限の管理 |
| 権限セット | **Should** | 同等 | ・追加権限の付与<br/>・ユーザ別権限拡張<br/>・期限付き権限 |

## C. 自動化・ワークフロー（Automation）

### C1. データ品質・バリデーション

| 機能要素 | 優先度 | Salesforce同等性 | 受入基準 |
|:---------|:-------|:----------------|:---------|
| バリデーションルール | **Must** | 同等 | ・数式による条件判定<br/>・カスタムエラーメッセージ<br/>・保存前検証実行 |
| 必須項目制御 | **Must** | 同等 | ・レコードタイプ別制御<br/>・条件付き必須設定<br/>・段階的必須項目 |
| 数式項目 | **Should** | 同等 | ・参照先項目の計算<br/>・リアルタイム更新<br/>・循環参照防止 |
| ロールアップ集計 | **Should** | 同等 | ・子レコード集計<br/>・COUNT/SUM/AVG/MIN/MAX<br/>・条件付き集計 |

### C2. プロセス自動化

| 機能要素 | 優先度 | Salesforce同等性 | 受入基準 |
|:---------|:-------|:----------------|:---------|
| Workflow・自動化 | **Must** | 同等 | ・条件ベースアクション実行<br/>・項目更新・通知・タスク作成<br/>・実行履歴の記録 |
| 承認プロセス | **Should** | 同等 | ・多段階承認フロー<br/>・動的承認者設定<br/>・差戻し・委任機能 |
| Process Builder相当 | **Could** | 同等 | ・複雑な条件分岐<br/>・複数アクション実行<br/>・視覚的フロー定義 |

## D. UI・UX（User Interface & Experience）

### D1. 基本インターフェース

| 機能要素 | 優先度 | Salesforce同等性 | 受入基準 |
|:---------|:-------|:----------------|:---------|
| Lightning相当UI | **Must** | 同等 | ・レスポンシブデザイン<br/>・モダンUIコンポーネント<br/>・アクセシビリティ対応 |
| レコード詳細ページ | **Must** | 同等 | ・関連レコード表示<br/>・活動タイムライン<br/>・項目セクション化 |
| リストビュー | **Must** | 同等 | ・フィルタ・ソート機能<br/>・カスタムビュー作成<br/>・一括操作対応 |
| 検索機能 | **Must** | 同等 | ・グローバル検索<br/>・オブジェクト横断検索<br/>・検索結果ハイライト |
| ナビゲーション | **Should** | 同等 | ・タブベース構成<br/>・最近参照アイテム<br/>・ブックマーク機能 |

### D2. カスタマイズ機能

| 機能要素 | 優先度 | Salesforce同等性 | 受入基準 |
|:---------|:-------|:----------------|:---------|
| ページレイアウト | **Should** | 同等 | ・レコードタイプ別設定<br/>・項目配置カスタマイズ<br/>・関連リスト設定 |
| カスタムタブ | **Could** | 同等 | ・オブジェクト別タブ<br/>・アイコン・色設定<br/>・アクセス権制御 |
| ホームページコンポーネント | **Could** | 簡易 | ・ダッシュボード要素<br/>・個人設定<br/>・レイアウト変更 |

## E. レポート・分析（Reports & Analytics）

### E1. レポート機能

| 機能要素 | 優先度 | Salesforce同等性 | 受入基準 |
|:---------|:-------|:----------------|:---------|
| レポートビルダー | **Must** | 簡易 | ・ドラッグ&ドロップ構築<br/>・フィルタ・グループ化<br/>・基本チャート生成 |
| 表形式レポート | **Must** | 同等 | ・項目選択・並び替え<br/>・小計・総計行<br/>・エクスポート機能 |
| 集計レポート | **Should** | 同等 | ・グループ化・小計<br/>・マトリクス形式<br/>・ドリルダウン |
| ダッシュボード | **Should** | 簡易 | ・複数レポートの組合せ<br/>・チャート・メーター表示<br/>・フィルタ連動 |

### E2. 予測・分析

| 機能要素 | 優先度 | Salesforce同等性 | 受入基準 |
|:---------|:-------|:----------------|:---------|
| セールス予測 | **Should** | 同等 | ・ロール階層別積上げ<br/>・予測カテゴリ集計<br/>・調整値入力機能 |
| パイプライン分析 | **Should** | 同等 | ・Stage別滞留分析<br/>・勝率・期間分析<br/>・トレンド可視化 |
| Einstein相当AI | **Won't** | - | Phase3以降で検討 |

## F. 連携・API（Integration & API）

### F1. データ連携

| 機能要素 | 優先度 | Salesforce同等性 | 受入基準 |
|:---------|:-------|:----------------|:---------|
| REST API | **Must** | 同等 | ・CRUD操作対応<br/>・バルク処理<br/>・認証・認可統合 |
| GraphQL API | **Should** | 拡張 | ・柔軟なデータ取得<br/>・型安全性<br/>・リアルタイム更新 |
| Bulk API | **Should** | 同等 | ・大量データ処理<br/>・非同期処理<br/>・進捗確認機能 |
| Metadata API | **Could** | 同等 | ・設定変更API<br/>・デプロイメント対応<br/>・バックアップ・復元 |

### F2. 外部システム連携

| 機能要素 | 優先度 | Salesforce同等性 | 受入基準 |
|:---------|:-------|:----------------|:---------|
| Webhook | **Should** | 同等 | ・イベント駆動通知<br/>・カスタムペイロード<br/>・再送機能 |
| 外部ID管理 | **Should** | 同等 | ・一意キー設定<br/>・Upsert操作<br/>・重複防止 |
| メール連携 | **Could** | 簡易 | ・送受信履歴保存<br/>・メールテンプレート<br/>・配信管理 |

---

## G. 総合受入基準（Comprehensive Acceptance Criteria）

### G1. データ整合性（Data Integrity）

| 項目 | 基準 |
|:-----|:-----|
| 不変条件遵守 | 全てのINV-*条件がシステム的に保証されること |
| 参照整合性 | 外部キー制約が確実に維持されること |
| トランザクション境界 | ACID特性が保証されたデータ更新 |
| 同時実行制御 | 楽観ロックによる更新競合回避 |

### G2. パフォーマンス（Performance）

| 項目 | 基準 |
|:-----|:-----|
| 画面表示速度 | 初期表示3秒以内、操作応答1秒以内 |
| API応答時間 | 単件操作200ms以内、一覧取得500ms以内 |
| バルク処理 | 10,000件/分の処理速度 |
| 同時接続数 | 1,000ユーザの同時アクセス対応 |

### G3. セキュリティ（Security）

| 項目 | 基準 |
|:-----|:-----|
| 認証基盤 | OAuth 2.0/OpenID Connect対応 |
| データアクセス制御 | 全API・画面でOWD・FLS・共有ルール適用 |
| 暗号化 | 通信TLS1.2+、保存時AES256 |
| 監査ログ | 重要操作の完全なログ記録 |

### G4. 可用性・運用性（Availability & Operations）

| 項目 | 基準 |
|:-----|:-----|
| SLA目標 | 稼働率99.5%以上 |
| 障害復旧 | RPO 4時間、RTO 2時間 |
| バックアップ | 日次自動バックアップ、世代管理 |
| モニタリング | ヘルスチェック、アラート機能 |

### G5. ユーザビリティ（Usability）

| 項目 | 基準 |
|:-----|:-----|
| 学習コストベンチマーク | Salesforce経験者が1日でオペレーション可能 |
| 主要業務フロー完結性 | Lead→Opportunity→Quote→Orderが10画面以内 |
| エラーハンドリング | ユーザ理解可能なエラーメッセージ |
| アクセシビリティ | WCAG 2.1 AA準拠 |

---

## H. 実装フェーズ計画

### Phase 1 (MVP) - Must項目
- コアCRUDとセキュリティ基盤
- 基本UI・レポート
- REST API基盤

### Phase 2 - Should項目  
- 高度な自動化・ワークフロー
- ダッシュボード・予測
- GraphQL API

### Phase 3 - Could項目
- AI機能・高度分析
- 外部システム連携拡張
- Territory管理

### Phase 4以降 - Won't項目
- Einstein相当AI
- 複雑なカスタマイズツール
- マーケティング自動化連携