# 用語集 v1（Canonical Glossary）

## 0. この用語集のルール

* **正準用語（Canonical Term）**：本書内で唯一使用する正式名称。
* **同義語**：入力UIや移行データ等で出現してよい別名（ただし表示は正準用語へ正規化）。
* **禁止語**：混乱を招くため使用禁止（ドキュメント・UI・APIに出さない）。
* **境界（In/Out）**：その概念が"含むもの/含まないもの"。
* **識別子**：レコードを一意に識別するId（内部用）。
* **外部ID**：外部システム連携・移行用の一意キー（任意、複数持てる）。

## 1. コア業務エンティティ（営業ドメイン）

### 1.1 取引先（Account）
*   **定義**：営業活動の対象となる企業・組織単位（B2Bの顧客組織）。商談・担当者・活動の集約起点。
*   **境界**：
    *   含む：法人/部門（運用で"部門別アカウント"も許容する）
    *   含まない：個人顧客（B2C）※必要なら別概念（個人取引先）として拡張可能
*   **同義語**：顧客、会社、企業、アカウント
*   **禁止語**：お客様（曖昧）、法人（法的概念に寄る）
*   **主要関係**：取引先は複数の担当者・商談・活動を持つ／親子階層を持てる
*   **備考**：取引先の親子は「グループ会社階層」または「部門階層」を表す（混在させる場合は運用ルールで明確化）

### 1.2 担当者（Contact）
*   **定義**：取引先に所属する人物（キーマン/窓口/関係者）。
*   **境界**：
    *   含む：個人（氏名・連絡先・役職等）
    *   含まない：社内ユーザ（User）
*   **同義語**：コンタクト、担当、キーマン
*   **禁止語**：担当（曖昧：誰の担当か不明）
*   **主要関係**：担当者は必ず1つの取引先に所属（例外：兼務は別オブジェクトで表現）
*   **不変条件参照**：INV-A1

### 1.3 商談（Opportunity）
*   **定義**：受注可能性のある営業案件。金額・確度・期日・ステージ（工程）で管理する。
*   **境界**：
    *   含む：案件の進捗、金額、見込時期、関係者、活動
    *   含まない：受注後の提供・請求・サポート（別領域。ただし受注（Order）への連携は含む）
*   **同義語**：案件、オポチュニティ、パイプライン
*   **禁止語**：プロジェクト（納品プロジェクトと混同）
*   **主要属性**：ステージ、確度、予測カテゴリ、クローズ日、金額、次アクション
*   **重要ルール**：商談は必ず取引先に紐付く
*   **不変条件参照**：INV-O1, INV-O2, INV-O3
### 1.4 商談関連用語
*   **ステージ（Stage）**：商談の進捗段階。各ステージには確度（Probability）と予測カテゴリが紐付く。
*   **確度（Probability）**：その商談が成約する確率（0-100%）。ステージに連動する。
*   **成約（Closed Won）**：商談が受注に至った最終ステータス（IsWon=true, IsClosed=true）。
*   **失注（Closed Lost）**：商談が破談・競合負け等で終了した最終ステータス（IsWon=false, IsClosed=true）。
*   **主要見積（Primary Quote）**：商談に紐付く複数の見積のうち、商談の金額や明細と同期される唯一の見積。
    *   **不変条件参照**：INV-Q1
*   **商談チーム（Opportunity Team）**：1つの商談に共同で関わるユーザの集合。役割（AE, SE等）とアクセス権を持つ。

### 1.5 リード（Lead）
*   **定義**：取引先・担当者として確定する前の見込み情報（名刺/フォーム/紹介など）。
*   **境界**：
    *   含む：個人（担当者候補）または会社名だけの情報
    *   含まない：既存取引先の人物（Contactがある場合はLeadではなくContactを拡充する）
*   **同義語**：見込み客、見込み、引合い（※引合いは商談と混同されやすい）
*   **禁止語**：案件（商談と混同）
*   **主要操作**：コンバート（Lead → Account/Contact（＋任意で商談））
*   **不変条件参照**：INV-L1, INV-L2

### 1.6 リード関連用語
*   **リードコンバート（Lead Conversion）**：Leadが精査（Qualify）され、取引先・担当者・商談へ変換するプロセス。
    *   **原子性**：コンバートは原子的（全成功or全失敗）
*   **不適格（Disqualified）**：リードの質が低く、営業対象にならないと判断された状態。
    *   **必須項目**：DisqualificationReason

### 1.7 活動（Activity）
*   **定義**：営業行動の記録（タスク、会議、メール、通話など）。
*   **境界**：
    *   含む：実施/予定/フォローの行動
    *   含まない：単なるメモ（ただし"活動メモ"として添付は可）
*   **同義語**：アクティビティ、ログ、行動履歴
*   **禁止語**：履歴（監査履歴と混同）
*   **重要ルール**：
    *   活動は「人物（Lead/Contact）」と「対象（商談/取引先など）」に紐づけ可能
    *   活動は時系列で追跡できる
*   **不変条件参照**：INV-ACT1, INV-ACT2

### 1.8 活動関連用語
*   **タスク（Task）**：期限を持つ ToDo。完了/未完了のステータスを持つ。
*   **行動（Event）**：日時が決まっている予定。カレンダー。
*   **活動タイムライン（Activity Timeline）**：レコードに紐付く活動の履歴を時系列で表示。
*   **多態参照（Polymorphic Reference）**：
    *   **WhoId（人物）**：Lead または Contact を指す（INV-ACT1）
    *   **WhatId（対象）**：Account, Opportunity, Campaign, Quote, Order等を指す（INV-ACT2）

## 4. 共有・権限（Sharing & Security）関連

*   **オブジェクト権限（Object Permissions）**: オブジェクト（テーブル）単位での CRUD 権限。
*   **項目レベルセキュリティ（Field-Level Security, FLS）**: フィールド単位での参照/編集権限。
*   **組織全体の構成（OWD: Organization-Wide Defaults）**: 全ユーザがデフォルトで持つレコードへのアクセス権（公開/非公開）。
*   **共有ルール（Sharing Rule）**: 条件に基づいて、特定のロールやグループにレコードアクセス権を拡張する設定。
*   **手動共有（Manual Sharing）**: 所有者が個別のレコードを特定のユーザに共有すること。
*   **アクセスレベル（Access Level）**: Read（参照のみ） / Write（参照・更新可能）などのレベル。

## 5. 組織・テリトリ（Org & Territory）関連

*   **ロール階層（Role Hierarchy）**: 上位者が下位者のレコードにアクセスできる階層構造（管理職が部下のデータを見れる）。
*   **テリトリ管理（Enterprise Territory Management）**: 地理的、業種的、またはその他の基準に基づいてレコードを割当・共有する仕組み。Accountの割当が基点となる。
*   **公開グループ（Public Group）**: 共有の対象として定義されるユーザの集合。

## 2. 商品・価格・明細（CPQ Lite）

### 2.1 商品（Product）
*   **定義**：販売する商品・サービスのマスタ。
*   **境界**：
    *   含む：SKU/プラン/サブスク商品
    *   含まない：見積/受注の明細（それはLine Item）
*   **同義語**：プロダクト、商品マスタ
*   **禁止語**：メニュー（飲食等の比喩）

### 2.2 価格表（Pricebook）
*   **定義**：価格設定の集合（標準/顧客別/地域別など）。価格は「商品×価格表」で定義される。
*   **境界**：
    *   含む：通貨、単価ルール（固定単価）
    *   含まない：複雑な構成価格（CPQ領域）
*   **同義語**：プライスブック、価格マスタ
*   **不変条件参照**：INV-P1

### 2.3 価格表関連用語
*   **標準価格表（Standard Price Book）**：すべての商品とマスタ価格が含まれるマスター価格表（IsStandard=true）。
*   **カスタム価格表（Custom Price Book）**：顧客タイプや地域別などで定義される独自の価格表。
*   **価格表エントリ（Price Book Entry）**：特定の価格表における特定商品の単価（交差エンティティ）。
    *   **一意制約**：(PricebookId, ProductId)

### 2.4 明細（Line Item）
*   **定義**：見積/商談/受注の品目行（数量、単価、割引、期間など）。
*   **境界**：
    *   含む：金額構成要素
    *   含まない：商品マスタ（Product）
*   **重要ルール**：明細は「商品×価格表」の整合を満たす（価格表に存在しない商品は選べない）
*   **不変条件参照**：INV-LI1, INV-LI2, INV-LI3

### 2.5 サブスクリプション関連用語
*   **課金頻度（Billing Frequency）**：サービスの課金単位。月次(Monthly)、年次(Yearly)、3年(ThreeYear)の3種類。
*   **契約期間（Term）**：サービス提供期間。月数で管理する。
    *   **終了日計算**：EndDate = StartDate + TermMonths - 1日（例: 2024/4/15 + 12ヶ月 → 2025/4/14）
*   **更新（Renewal）**：契約期間終了後の継続。同一契約として管理し、発注を追加する形で延長。
*   **追加販売（Upsell）**：既存契約の拡張（ユーザー数増加、上位プランへの変更など）。
*   **縮小（Downsell）**：既存契約の縮小（ユーザー数削減など）。

## 3. 契約・発注・請求（Contract, Order, Invoice）

### 3.1 契約（Contract）
*   **定義**：顧客との取引条件を定める合意。契約タイプにより管理方法が異なる。
*   **境界**：
    *   含む：契約条件、期間、金額、明細、PoF残高
    *   含まない：個別の発注（Order）、請求（Invoice）
*   **同義語**：コントラクト、利用契約
*   **禁止語**：案件（商談と混同）
*   **契約タイプ**：
    *   **License**：ソフトウェアライセンス契約。利用規約ベースで継続し、発注ごとに金額・期間が変動。
    *   **PoF（Pool of Funds）**：プール消化型契約。総額を契約し、消化していく形態。
    *   **Service**：業務委託契約。都度契約書を締結。
*   **重要ルール**：
    *   対象システムが同一の場合、1つの契約として管理
    *   1つの契約に複数の発注が紐付く
*   **不変条件参照**：INV-CNT1, INV-CNT2, INV-CNT3, INV-CNT4

### 3.2 契約明細（Contract Line Item）
*   **定義**：契約に含まれるサービス・商品の明細。顧客別の契約単価を含む。
*   **境界**：
    *   含む：商品、数量、単価、期間、顧客別PoF単価
    *   含まない：消化履歴（PoolConsumption）
*   **重要ルール**：PoF契約の場合、CustomerUnitPriceに顧客別の消化単価を設定

### 3.3 発注（Order）
*   **定義**：顧客からの正式な購入確定。発注書受領により作成され、売上認識のトリガーとなる。
*   **境界**：
    *   含む：発注金額、発注明細、開始日・終了日、元見積
    *   含まない：見積（Quote）、契約書本体
*   **同義語**：オーダー、受注、発注書
*   **禁止語**：注文（消費者向けニュアンス）
*   **重要ルール**：
    *   発注書受領が売上認識のトリガー
    *   見積なしで直接発注も可能
    *   1つの契約に複数の発注が紐付く
*   **不変条件参照**：INV-ORD1, INV-ORD2

### 3.4 発注明細（Order Line Item）
*   **定義**：発注に含まれるサービス・商品の明細。期間情報を含む。
*   **境界**：
    *   含む：商品、数量、単価、期間（TermMonths）、課金頻度
*   **重要ルール**：Subtotal = UnitPrice × Quantity × TermMonths

### 3.5 PoF消化（Pool Consumption）
*   **定義**：Pool of Funds契約における残高消化の記録。
*   **境界**：
    *   含む：消化金額、消化理由、申請・承認情報
    *   含まない：プール総額（Contract.PoolAmount）
*   **同義語**：プール消化、消化申請
*   **重要ルール**：
    *   営業担当が消化申請を作成
    *   顧客別PoF単価（CustomerUnitPrice）を適用して消化金額を計算
    *   契約期間終了時に残高は消滅
*   **不変条件参照**：INV-POF1, INV-POF2, INV-POF3

### 3.6 請求書（Invoice）
*   **定義**：顧客への代金請求書。
*   **境界**：
    *   含む：請求金額、請求明細、支払期限、入金状況
    *   含まない：入金詳細（別途入金管理が必要な場合）
*   **同義語**：インボイス
*   **発行タイミング**：
    *   ライセンス契約：商談クローズ後すぐ
    *   業務委託契約：納品完了後
    *   PoF契約：初回契約時（プール総額）
*   **不変条件参照**：INV-INV1, INV-INV2, INV-INV3

### 3.7 請求明細（Invoice Line Item）
*   **定義**：請求書の品目行。発注明細から生成される。
*   **境界**：
    *   含む：摘要、数量、単価、金額

## 7. 予測（Forecasting）関連

*   **予測（Forecasts）**: 営業活動の結果として見込まれる売上の予測値。
*   **予測カテゴリ（Forecast Category）**: ステージに紐付く集計単位（Pipeline, Best Case, Commit, Closed等）。
*   **調整（Adjustment）**: マネージャ等が部下の積み上げた数字に対して加味する修正値。
*   **クォータ（Quota）**: 営業担当者に割り当てられる目標値。

## 6. 監査・自動化・システム基盤

### 6.1 監査（Audit）
*   **項目履歴（Field History Tracking）**：フィールドの値が「いつ」「誰が」「AからBに」変えたかを記録するログ。
*   **監査ログ（Audit Trail）**：システム設定や権限の変更を記録するログ。
*   **イベントログ（Event Log）**：重要なビジネスイベント（Convert/StageChange/OwnerChange等）の記録。
*   **実行ログ（Automation Run Log）**：自動化の実行履歴と結果。

### 6.2 自動化（Automation）
*   **入力制約（Validation Rule）**：保存時に満たすべき条件を定義（違反時は保存不可）。
*   **ワークフロー（Workflow）**：条件に応じて自動処理（更新/通知/タスク作成等）。
*   **承認（Approval）**：申請→承認→差戻しの状態機械と履歴。
*   **保存パイプライン（Save Pipeline）**：AuthZ→Validation→Before→Persist→After→Async→Audit の固定順序。

### 6.3 システム基盤
*   **テナント（Tenant）**：顧客企業単位のデータ分離境界。
*   **不変条件（Invariants）**：システムが常に満たしていなければならないデータの整合性制約。
*   **楽観ロック（Optimistic Lock）**：SystemModstampによる同時更新制御。
*   **論理削除（Soft Delete）**：IsDeleted=trueによる削除（物理削除はしない）。
