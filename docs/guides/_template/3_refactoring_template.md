# [リファクタリング対象] リファクタリング

<!-- 
📝 命名ガイドライン
リファクタリング対象の命名については以下のガイドラインを参照してください：
→ naming-guidelines.md

適切な命名例：
- コンポーネントリファクタリング: [コンポーネント名] リファクタリング (例: ダッシュボードコンポーネント リファクタリング)
- システムリファクタリング: [システム名] リファクタリング (例: 認証システム リファクタリング)
- アーキテクチャリファクタリング: [アーキテクチャ名] リファクタリング (例: Atomic Design準拠 リファクタリング)
- パフォーマンスリファクタリング: [対象]パフォーマンス改善 リファクタリング (例: 画像読み込みパフォーマンス改善 リファクタリング)
-->

## タスク概要

<!-- リファクタリングの概要を簡潔に記述 -->
[リファクタリングの目的と概要を記述してください]

## 計画

### 目的

<!-- リファクタリングの目的を明確に記述 -->
[リファクタリングの目的を記述してください]

### 実装要件

#### リファクタリング対象

- **対象コンポーネント**: [リファクタリング対象のコンポーネント一覧]
- **対象ディレクトリ**: [リファクタリング対象のディレクトリ]
- **影響範囲**: [リファクタリングの影響範囲]

#### 変更内容

- **構造変更**: [ディレクトリ構造やファイル構造の変更]
- **設計変更**: [設計パターンやアーキテクチャの変更]
- **命名変更**: [命名規則の変更]

#### 技術要件

- **設計原則**: [Atomic Design等の設計原則]
- **命名規則**: [新しい命名規則]
- **ディレクトリ構造**: [新しいディレクトリ構造]
- **エラーハンドリング**: [Error Boundary/try-catch/エラー状態管理等]

### 完了条件

<!-- リファクタリング完了の判定基準 -->

- [ ] すべての対象コンポーネントが新しい構造に変更される
- [ ] ビルドエラーが発生しない
- [ ] 既存の機能が正常に動作する
- [ ] テストが正常に通過する
- [ ] エラーハンドリングが適切に実装されている
- [ ] エラー状態のテストが作成されている

### 制約

<!-- リファクタリング時の制約事項 -->

- [制約事項1]
- [制約事項2]

### テスト要件

<!-- リファクタリング後のテスト実装要件 -->

#### 回帰テスト

- **既存機能**: [既存機能の動作確認テスト]
- **API互換性**: [APIの互換性確認テスト]
- **UI動作**: [UI動作の回帰テスト]
- **パフォーマンス**: [パフォーマンス回帰テスト]

#### 単体テスト更新

- **テストファイル移動**: [テストファイルの移動と更新]
- **インポート修正**: [テストファイル内のインポート修正]
- **新規テスト**: [新しい構造に対応したテスト追加]
- **モック更新**: [モックの更新]

#### E2Eテスト更新

- **シナリオ確認**: [既存E2Eテストシナリオの動作確認]
- **セレクタ更新**: [変更されたセレクタの更新]
- **新規フロー**: [新しい構造に対応したフローテスト]

#### Storybookテスト更新

- **ストーリー移動**: [ストーリーファイルの移動と更新]
- **インポート修正**: [ストーリー内のインポート修正]
- **新規ストーリー**: [新しい構造に対応したストーリー]
- **インタラクションテスト**: [インタラクションテストの更新]

#### テスト品質保証

- **カバレッジ維持**: [テストカバレッジの維持確認]
- **テスト安定性**: [テストの安定性確認]
- **実行時間**: [テスト実行時間の確認]

### 移行計画

<!-- 段階的な移行計画 -->

#### フェーズ1: [フェーズ名]
- [実施内容1]
- [実施内容2]

#### フェーズ2: [フェーズ名]
- [実施内容1]
- [実施内容2]

## 実行結果
このセクションは実装後に適切に編集してください

### 🎯 実装目標

<!-- リファクタリングの目標を再確認 -->
[リファクタリング目標を記述してください]

### 📊 実装完了

<!-- リファクタリング完了の確認 -->
[リファクタリング内容]が正常に完了しました。

### 🏗️ 実装内容

<!-- 具体的な実装内容の詳細 -->

#### 1. [変更項目1]

- **変更前**: `[変更前のパス/構造]`
- **変更後**: `[変更後のパス/構造]`
- **変更内容**: [具体的な変更内容]
- **効果**: [変更による効果]

#### 2. [変更項目2]

- **対象**: [変更対象]
- **変更内容**: [具体的な変更内容]
- **新機能**: [追加された機能]
- **改善点**: [改善された点]

### 🔧 新しい構造

<!-- リファクタリング後の新しい構造 -->

**ディレクトリ構造**

```
[新しいディレクトリ構造を記述]
```

**コンポーネント分類**

- **[分類1]**: [分類の説明と含まれるコンポーネント]
- **[分類2]**: [分類の説明と含まれるコンポーネント]

### 🔄 移行詳細

<!-- 移行の詳細情報 -->

**ファイル移動**

| 変更前 | 変更後 | 変更内容 |
|--------|--------|----------|
| [旧パス] | [新パス] | [変更内容] |
| [旧パス] | [新パス] | [変更内容] |

**インポート変更**

```typescript
// 変更前
import { [コンポーネント] } from '[旧パス]';

// 変更後
import { [コンポーネント] } from '[新パス]';
```

**破壊的変更**

- **[変更項目]**: [破壊的変更の詳細]
- **対応方法**: [対応方法の説明]

### ✅ 動作確認

<!-- 動作確認の結果 -->

#### ビルド確認
- TypeScript ビルド: ✅ 成功
- 開発サーバー起動: ✅ 成功

#### 機能確認
- [機能1]: ✅ 正常動作
- [機能2]: ✅ 正常動作
- [機能3]: ✅ 正常動作

#### テスト確認

**単体テスト (Vitest)**
- **実行結果**: ✅ 全テスト通過 ([通過数]/[総数])
- **カバレッジ**: [実際のカバレッジ率]% (変更前: [変更前のカバレッジ率]%)
- **回帰テスト**: ✅ 既存機能の動作確認完了
- **新規テスト**: ✅ 新しい構造に対応したテスト追加完了

**E2Eテスト (Playwright)**
- **実行結果**: ✅ 全シナリオ通過
- **回帰テスト**: ✅ 既存フローの動作確認完了
- **セレクタ更新**: ✅ 変更されたセレクタの更新完了
- **新規フロー**: ✅ 新しい構造に対応したフロー追加完了

**Storybookテスト**
- **ストーリー更新**: ✅ 全ストーリーの移動・更新完了
- **インタラクションテスト**: ✅ 全テスト通過
- **ビジュアルテスト**: ✅ ビジュアル回帰なし
- **アクセシビリティテスト**: ✅ a11yテスト通過

#### テスト品質指標
- **総テスト数**: [総テスト数] (変更前: [変更前のテスト数])
- **通過率**: [通過率]%
- **実行時間**: [実行時間] (変更前: [変更前の実行時間])
- **安定性**: [テストの安定性評価]
- **カバレッジ変化**: [カバレッジの変化詳細]

#### 互換性確認
- **API互換性**: ✅ 既存APIとの互換性確認完了
- **コンポーネント互換性**: ✅ 既存コンポーネントとの互換性確認完了
- **型互換性**: ✅ TypeScript型の互換性確認完了

### 📈 効果・改善点

<!-- リファクタリングによる効果 -->

**改善点**

- **[改善項目1]**: [改善内容の詳細]
- **[改善項目2]**: [改善内容の詳細]
- **[改善項目3]**: [改善内容の詳細]

**メリット**

- **保守性向上**: [保守性向上の詳細]
- **再利用性向上**: [再利用性向上の詳細]
- **可読性向上**: [可読性向上の詳細]
- **開発効率向上**: [開発効率向上の詳細]

### 🚨 注意事項・制限事項

<!-- 注意事項や制限事項 -->

- [注意事項1]
- [注意事項2]

### 📚 技術的詳細

<!-- 技術的な詳細情報 -->

- **設計パターン**: [適用した設計パターン]
- **命名規則**: [新しい命名規則]
- **型安全性**: [TypeScript の型安全性の改善]
- **パフォーマンス**: [パフォーマンスの改善]

### 🚨 エラーハンドリング

<!-- エラーハンドリングの実装詳細 -->

#### 実装状況

- **エラーバウンダリ**: [Error Boundaryの実装有無とフォールバック UI]
- **エラー状態管理**: [loading/error/success状態の管理方法]
- **try-catch**: [非同期処理とAPI呼び出しのエラーハンドリング]

#### ユーザー体験

- **エラー表示**: [エラーメッセージとUI表示の方法]
- **バリデーション**: [フォームエラーとリアルタイム検証]
- **回復機能**: [リトライ機能と状態リセット]

#### 品質保証

- **エラーテスト**: [エラーケースのテスト実装状況]
- **ログ・監視**: [エラーログ出力と追跡設定]

### 🔮 今後の課題

<!-- 今後の課題 -->

- [課題1]
- [課題2]

### 📖 参考資料

<!-- 参考にした資料やドキュメント -->

- [参考資料1]
- [参考資料2]

## 実行履歴

<!-- 実行履歴をタイムスタンプ付きで記録 -->

- [yyyy/MM/dd HH:mm:ss] [実行内容の要約] 